#!/usr/bin/env node

'use strict';

require('../src/checkVersions')();
const fs = require('fs');
const pkg = require('../package.json');

/**
 * Parse Commands
 */
const program = require('commander');
program
    .usage('<type> <task> [options]')
    .version(pkg.version)
    //  .command('init [options] <repo>', 'init a repo')
    .parse(process.argv);

const type = program.args[0];
if (type === 'app')
    global.visionConfig = require('../src/getVisionConfig');
else if (type !== 'ui')
    global.visionConfig = Object.assign({
        docsPath: './docs',
    }, require('../src/getVisionConfig'));
else
    throw new Error('Unknown type!');

const task = program.args[1];
if (task === 'dev') {
    process.env.NODE_ENV = 'development';
} else if (task === 'build') {
    process.env.NODE_ENV = 'production';
} else
    throw new Error('Unkown task!');



require('../src/' + task)(require('../config/' + type));
