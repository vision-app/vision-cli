#!/usr/bin/env node

const path = require('path');
const pkg = require('../package.json');
const pathRegStr = '@?${name}/';

for (const dep in pkg.dependencies) {
    const depPath = require.resolve(dep);
    const pathReg = new RegExp(pathRegStr.replace('${name}', dep), 'g');
    if (pathReg.test(depPath)) {
        const lastIndex = pathReg.lastIndex;
        const pkgPath = path.resolve(depPath.slice(0, lastIndex) + '/package.json');
        const version = require(pkgPath).version;
        console.info(`├─ ${dep}@${version}`);
    } else {
        console.info(`├─ ${dep}@unknow`);
    }
    
}

